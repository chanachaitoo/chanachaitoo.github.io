<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Hannah</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://wsrv.nl">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <link rel="stylesheet" href="style.css">
    
    <!-- หมายเหตุ: นำ Firebase SDK และ Config ออกแล้ว เนื่องจากเปลี่ยนไปใช้ API -->
</head>
<body>
    <div id="app-container">
        
        <!-- Navbar will be injected by menu.js -->
        <div id="navbar-placeholder"></div>

        <div id="view-home">
            <div class="controls-wrapper">
                <!-- Search Box (Updated IDs with 'home-') -->
                <div id="home-search-container-box" class="search-container skeleton-shimmer">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10,18a8,8,0,1,1,8-8A8,8,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6,6,0,0,0,10,4Z"/><path d="M21,21a1,1,0,0,1-.71-.29l-4-4a1,1,0,0,1,1.42-1.42l4,4a1,1,0,0,1,0,1.42A1,1,0,0,1,21,21Z"/></svg>
                    
                    <input type="text" id="home-search-input" disabled placeholder="ค้นหาชื่อสินค้า (คั่นด้วย , เพื่อหาหลายคำ)">
                    
                    <div id="home-search-clear-btn" class="search-clear-btn hidden" title="ล้างคำค้นหา">
                        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
                    </div>

                    <div class="search-separator"></div>
                    
                    <label id="stock-checkbox-label" class="checkbox-label">
                        <input type="checkbox" id="hide-out-of-stock-checkbox" checked>
                        <span>ซ่อนสินค้าที่หมด</span>
                    </label>
                </div>

                <!-- Category Filters -->
                <div id="category-filter-container" class="category-scroll-container">
                    <button class="category-chip active" data-value="all">ทั้งหมด</button>
                    <button class="category-chip skeleton-shimmer" style="width: 80px; color: transparent; border: none;"></button>
                    <button class="category-chip skeleton-shimmer" style="width: 100px; color: transparent; border: none;"></button>
                    <button class="category-chip skeleton-shimmer" style="width: 60px; color: transparent; border: none;"></button>
                </div>

                <!-- Promo Banner -->
                <div class="promo-banner">
                    <div class="promo-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM13 20.01L4 11V4h7v-.01l9 9-7 7.02z"/>
                            <circle cx="6.5" cy="6.5" r="1.5"/>
                        </svg>
                    </div>
                    <div class="promo-content">
                        <div>
                            <span class="promo-title">โปรโมชั่นพิเศษ :</span>
                            ซื้อครบ <span class="promo-highlight">100 บาท</span> ลดทันที <span class="promo-highlight">5 บาท</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Grid -->
            <div id="product-grid"></div>

            <!-- View More Button Container (New) -->
            <div id="load-more-container" class="load-more-container hidden">
                <button id="load-more-btn" class="load-more-btn">
                    ดูเพิ่มเติม <i class="fas fa-chevron-down" style="margin-left: 5px;"></i>
                </button>
            </div>

            <!-- Tags Popup (Shared or Home specific) -->
            <div id="tags-popup-overlay" class="popup-overlay">
                <div id="tags-popup-content" class="popup-content">
                    <h3>แท็กทั้งหมดของ : <span id="popup-product-name"></span></h3>
                    <div id="tags-popup-list"></div>
                </div>
            </div>
        </div>
        <!-- END VIEW: HOME -->


        <!-- =========================================
             VIEW: ORDER (จาก order.html เดิม)
             ========================================= -->
        <div id="view-order" class="hidden">
            <div class="controls-wrapper">
                <!-- Search Box (Updated IDs with 'order-') -->
                <div id="order-search-container-box" class="search-container skeleton-shimmer">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10,18a8,8,0,1,1,8-8A8,8,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6,6,0,0,0,10,4Z"/>
                        <path d="M21,21a1,1,0,0,1-.71-.29l-4-4a1,1,0,0,1,1.42-1.42l4,4a1,1,0,0,1,0,1.42A1,1,0,0,1,21,21Z"/>
                    </svg>
                    
                    <input type="text" id="order-search-input" disabled placeholder="ค้นหาไอดีออเดอร์, ไอดีบัญชีลูกค้า">
                    
                    <div id="order-clear-search-btn" class="search-clear-btn hidden" title="ล้างคำค้นหา">
                        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor">
                            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="main-container">
                
                <div id="stats-grid" class="stats-grid">
                    <div class="stat-card bg-gradient-primary">
                        <div class="stat-content">
                            <div class="stat-title">ออเดอร์</div>
                            <div id="total-orders" class="stat-value">0</div>
                        </div>
                        <div class="stat-bg-icon">
                            <i class="fas fa-clipboard-list fa-5x"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card bg-gradient-secondary">
                        <div class="stat-content">
                            <div class="stat-title">รายการสินค้า</div>
                            <div id="total-products" class="stat-value">0</div>
                        </div>
                        <div class="stat-bg-icon">
                            <i class="fas fa-cubes fa-5x"></i>
                        </div>
                    </div>
                </div>

                <div id="content-grid" class="content-grid">
                    
                    <div class="column-card">
                        <div class="column-header">
                            <h2 class="column-title text-pending">
                                <i class="fas fa-clock"></i>
                                กำลังดำเนินการ
                            </h2>
                            <span id="pending-count-badge" class="badge-count hidden">0</span>
                        </div>
                        
                        <div id="pending-list" class="order-list">
                            <!-- Items will be injected here -->
                        </div>
                    </div>

                    <div class="column-card">
                        <div class="column-header">
                            <h2 class="column-title text-success">
                                <i class="fas fa-check-circle"></i>
                                เรียบร้อยแล้ว
                            </h2>
                        </div>
                        
                        <div id="completed-list" class="order-list">
                            <!-- Items will be injected here -->
                        </div>
                        
                        <div id="pagination-controls" class="pagination-container hidden">
                            <button id="prev-btn" class="page-btn">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            
                            <span class="page-info" id="page-info">1 / 1</span>
                            
                            <button id="next-btn" class="page-btn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Order Modal -->
        <div id="order-modal" class="modal-overlay">
            <div class="modal-content" id="modal-content">
                
                <div class="modal-header">
                    <div class="modal-title">
                        <h3 id="m-order-id">Order ID</h3>
                        <p id="m-order-date">Date</p>
                    </div>
                    <div class="modal-actions">
                        <button id="close-modal-btn" class="action-btn close-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <div id="modal-body" class="modal-body">
                    <div class="info-grid">
                        <div class="info-box info-header">
                            <div id="m-game-logo" class="game-logo-small" style="width: 40px; height: 40px; border-radius: 50%; overflow:hidden; display: flex; align-items: center; justify-content: center; background: white;">
                                <!-- Logo injected here -->
                            </div>
                            <div style="flex: 1; min-width: 0;">
                                <span class="info-label">เกมส์</span>
                                <span class="info-val" id="m-game-id">-</span>
                            </div>
                        </div>
                        <div class="info-box">
                            <span class="info-label">ไอดีบัญชีลูกค้า</span>
                            <span class="info-val" id="m-customer-id">-</span>
                        </div>
                        <div class="info-box">
                            <span class="info-label">สถานะการชำระเงิน</span>
                            <span class="info-val" id="m-payment">-</span>
                        </div>
                        <div class="info-box">
                            <span class="info-label">ราคารวม</span>
                            <span class="info-val text-primary" id="m-price">-</span>
                        </div>
                    </div>

                    <h4 style="font-weight: bold; margin-bottom: 12px; border-left: 4px solid var(--primary-color); padding-left: 12px;">รายการสินค้า</h4>
                    <div id="m-product-list" style="display: flex; flex-direction: column; gap: 12px;">
                        <!-- Order Items injected here -->
                    </div>
                </div>
            </div>
        </div>
        <!-- END VIEW: ORDER -->

    </div>

    <button id="scroll-to-top-btn" title="กลับไปด้านบน">▲</button>

    <!-- Scripts -->
    <script src="menu.js"></script> <!-- SPA Navigation Logic -->
    <script src="product.js"></script> <!-- Home Logic -->
    <script src="order.js"></script> <!-- Order Logic -->
</body>
</html>